# 온톨로지: `kuzudb::db`

## 1. 핵심 개념

`kuzudb::db` 모듈은 KuzuDB 데이터베이스와의 상호작용을 관리하는 핵심 레이어입니다. `KuzuDB` 구조체를 통해 데이터베이스 인스턴스와 연결을 관리하며, 쿼리 실행, 데이터 삽입 등 DB와 관련된 주요 로직을 캡슐화합니다.

- **`KuzuDB` 구조체**: KuzuDB `Database` 인스턴스를 소유하며, 데이터베이스 작업을 위한 메서드를 제공하는 중앙 허브 역할을 합니다.
- **인스턴스 관리**: `new` 함수를 통해 지정된 경로에 데이터베이스를 생성하거나 엽니다. 이 구조체는 Tauri의 `State`로 관리되어 애플리케이션 전역에서 싱글톤으로 안전하게 접근할 수 있습니다.
- **쿼리 추상화**: `exec_query`, `insert_note`와 같은 메서드를 제공하여, 복잡한 Cypher 쿼리 문자열을 직접 다루지 않고도 직관적으로 데이터베이스 작업을 수행할 수 있도록 합니다.

## 2. 활용처 (Usage)

- **DB 초기화**: `main.rs` (실질적으로는 `lib.rs`)에서 앱 시작 시 `KuzuDB::new()`를 호출하여 데이터베이스 인스턴스를 생성하고 Tauri의 `State`로 등록합니다.
- **스키마 설정**: `kuzudb::schema::initialize_schema` 함수에 `&KuzuDB` 참조를 전달하여 테이블 및 관계 스키마를 초기화합니다.
- **데이터 조작**: Tauri 커맨드(`kuzudb::commands`)에서 `State<KuzuDB>`를 통해 이 구조체에 접근하여 `Note` 생성(`insert_note`)과 같은 데이터 쓰기 작업을 수행합니다.

## 3. 변경 이력

- **25.08.26**:
    - `KuzuDB` 구조체 및 `new` 생성자 함수 구현.
    - `exec_query`와 `insert_note` 메서드를 추가하여 기본적인 쿼리 실행 및 데이터 삽입 기능 구현.
    - 계획 단계의 `connection.rs`에서 현재의 `db.rs`로 파일명이 변경됨.
