TODO
사이드바의 크기의 기본값을 사용자가 변경하거나,
특정 뷰에서 미리 크기를 변경해서 사용할 수 있게 해야함.


# 작업 완료 보고서: 반응형 섹션 설정(SectionConfig) 아키텍처 리팩토링

## 1. 작업 요약

기존의 비반응형(Non-Reactive) `Map` 기반 `SectionConfig` 아키텍처를 Svelte 5 룬(`$state`)을 사용한 **반응형 아키텍처로 전면 리팩토링**했습니다. 이 작업을 통해 설정값(예: 섹션의 기본 크기)이 변경될 때, 이를 사용하는 UI가 별도의 코드 없이 자동으로 업데이트되도록 개선했습니다.

또한, 사용자가 조정한 섹션의 크기를 새로운 기본값으로 저장할 수 있는 `saveCurrentSizeAsDefault` API를 추가하고 UI에 테스트 버튼을 연동하여 기능 구현을 완료했습니다.

## 2. 주요 변경 내용

### 2.1. 반응형 `SectionConfig` 아키텍처 도입

- **파일명 변경**: `sectionConfig.ts` -> `sectionConfig.svelte.ts`
- **핵심 변경**: 기존의 `Map`으로 관리되던 설정을 `$state` 룬으로 관리되는 반응형 객체로 변경하여, 데이터의 변경이 UI에 자동으로 전파되도록 만들었습니다.

**`sectionConfig.svelte.ts` (수정 후)**
```typescript
import type { Config, Direction, SectionType } from "$lib/types/layout";

const configs = $state<Record<string, Config>>({});

function getConfig(id: SectionType): Config { // ... }

function updateDefaultSize(id: SectionType, size: number) {
    const config = getConfig(id);
    config.default = size; // 반응형 할당
}

export const SectionConfig = {
  get: getConfig,
  updateDefaultSize,
  // ...
};
```

### 2.2. `section.svelte.ts` 로직 개선

- **`SectionConfig` 연동**: 새로운 반응형 `SectionConfig` API를 사용하도록 `import` 경로와 로직을 수정했습니다.
- **`saveCurrentSizeAsDefault` API 추가**: 사용자가 리사이징한 현재 섹션의 크기를 새로운 기본값으로 저장하는 함수를 `SectionApi`에 추가했습니다.

```typescript
// section.svelte.ts
function saveCurrentSizeAsDefault(id: SectionType) {
  const sectionState = getSectionState(id);
  const newSize = isVertical(sectionState) ? sectionState.w : sectionState.h;
  SectionConfig.updateDefaultSize(id, newSize);
}

export const SectionApi = {
  // ...
  saveCurrentSizeAsDefault,
};
```

### 2.3. UI 테스트 기능 구현

- `LeftSidebar.svelte` 컴포넌트에 새로운 기능을 테스트하기 위한 'Save Size' 버튼을 추가했습니다.

```svelte
<!-- LeftSidebar.svelte -->
<button onclick={() => API.section.saveCurrentSizeAsDefault(LAYOUT.LEFT_SIDEBAR)}>Save Size</button>
```

### 2.4. 관련 모듈 수정 (`initSections.ts`)

- `SectionConfig`의 API 변경에 따라, 초기 설정을 주입하는 `initSections.ts` 파일의 로직을 새로운 API에 맞게 수정하여 타입 오류를 해결했습니다.

## 3. 검증

- `npm run check` 명령을 실행하여 모든 타입스크립트 오류가 해결되었음을 확인했습니다.
- **수동 검증 필요**: 추가된 'Save Size' 버튼을 통해 다음 시나리오를 테스트해야 합니다.
  1. 사이드바 크기를 조절합니다.
  2. 'Save Size' 버튼을 클릭합니다.
  3. 사이드바를 껐다가 다시 켭니다.
  4. 사이드바가 저장된 크기로 다시 열리는지 확인합니다.
