# ⚡ **1. “볼트(Vault) 설정”이 선행되어야 하는 이유**

- **최초 폴더 결정이 전체 ingest/sync 대상·스코프의 모든 기준**  
- “폴더 변경” = 워크스페이스 전환, 데이터베이스 리셋
- 이후 모든 파일 scan/검색 동작의 루트!
- 여러 볼트/프로젝트 지원 시에도, 분리된 상태/context 유지를 위한 최선의 구조

***

# 🎨 **2. Vault(폴더) 설정 UI – MVP 플로우/구조**

### **A. UI 위치**
- **왼쪽 사이드바/상단바** → [볼트(폴더) 경로 표시] [설정/변경 버튼]  
- 또는 앱 첫 실행/초기화 상태에서 “세팅 용” **모달(Modal)**  
  - 파일탐색기 같은 폴더 선택 다이얼로그 연동

### **B. 동작 흐름**

1. **(초기/빈) 상태 → ‘볼트 설정’ 요청**
   - [‘+ 폴더 선택’ button]  
   - OS 파일 다이얼로그 → 선택 폴더 path 저장
2. **현재 볼트 경로(베이스폴더) 항상 표시**
   - 상단 또는 좌측 고정 바  
   - (원하면 드롭다운 등으로, 멀티워크스페이스 지원도 확장 가능)
3. **볼트 변경(재설정)**
   - 동일 인터페이스로 빠르게 변경 가능  
   - 변경 시 “모든 기존 데이터/DB/뷰를 리셋→새 ingest” 안내
4. **설정 직후 → “해당 폴더에서 마크다운 ingest+초기화+탐색” 자동진행**

***

## **UI 예시(컴포넌트 구조)**

- **sidebar (왼쪽)**
    - [볼트: `/Users/xx/Notes`]
    - [변경]  
    - (모달로 전환시)
        - “노트 폴더(볼트) 지정” → 폴더 선택 → 확인/적용  
- **상단바**
    - [현재 볼트 경로]   [변경/관리]
- **모달/다이얼로그**  
    - 제목: "작업할 노트 폴더(볼트)를 선택하세요"  
    - 폴더선택… [확인] [취소]
    - (최초 실행/값 없음일 땐, 강제적으로 모달부터 보여줘도 됨)

***

## 🚦 **구현 단계별 플로우 (예시)**

1. **앱 시작/새 프로젝트**
   → 볼트(폴더) 선택 유도  
2. **볼트 선택 → 해당 경로 저장(설정/환경변수/DBconf 등)**
3. **폴더 변경시 기존 DB 및 뷰 자동 클리어,  
  신규 ingest+노트 탐색(트리/리스트) 실행**

***

## 🏁 **최소 기능 체크리스트**

- [x] 폴더(볼트) 선택 UI
- [x] 선택한 볼트의 경로가 화면 어딘가 항상 잘 보임
- [x] 초기엔 볼트 설정 전엔 기능 사용 제한(빈화면/가이드)
- [x] 폴더 변경 시 기존 데이터 ALL RESET + 안내
- [x] 볼트 세팅 이후 검색/초기화(ingest) 버튼이 활성화/진행

***

### ⚡ **추천 구현 순서**

1. **볼트(UI) + 경로변경 저장/로드 → 완성**  
2. **해당 폴더 기준 ingest/검색/초기화 + 트리뷰 연동**  
3. **기본 ingest/초기검색 성공 확인되면, 이후 노트 생성/삭제/동기화 등 추가**

***

## ☑️ **정리**

- 볼트 설정을 “항상 먼저, 가장 확실하게” 하는 건  
  모든 데이터흐름/실서비스/버그 방지/UX에서 최고 전략입니다.
- **초기상태에선 볼트 미설정시 사용 제한/공백/가이드화면으로 UX 보완**  
- 설정 후 ingest + 트리/카드뷰로 연결!

***

추가로 **OS별 폴더선택구현,  
볼트값 저장/불러오기,  
MVP/스크립트 예제 등**  
구현이 필요하시면 안내해 드릴 수 있습니다!

이 결정이 앞으로의 모든 데이터 구조와 UX를 확실히 안전하고 깔끔하게 만들어줍니다!
