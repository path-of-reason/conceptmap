# 2. 상세기획서 – “프로젝트루만”  
**(Tauri + Rust + Kuzu + Markdown 기반 니클라스루만 정통 Zettelkasten/PKM 앱)**

***

## 2.1. 핵심 가치 정의 및 차별점

| 가치 | 상세 내용 및 시장 적합성 근거 |
|---|---|
| 완전한 데이터 소유권 | 마크다운 파일 동기화로 지식 유실 위험 최소화, Obsidian/Logseq 등 단독 파일 시스템과 100% 호환, 장기 기술변화·서비스 종료 유연 대응 |
| 유기적 연결+구조화(PKM 2.0) | Kuzu 내장형 그래프 탐색 및 "루만식 유기 넘버링/분기구조" 제공, 기존 PKM(Obsidian 등)에서 한계인 대규모 노트 속 고급 연결/계층/순서 트래킹 극복 |
| 초고속 탐색/검색 | 관계형 구조 및 순차/DFS/계층/트리/네트워크 검색 실시간 제공, 수천~수만 노트 실사용/실시간 뷰 대응 |
| 오프라인/로컬 주도, 외부 생태계와 확장성 | 네이티브 데스크탑(Tauri)로 오프라인, 프라이빗, 클라우드 연동 등 사용자의 자유 선택, Obsidian–Logseq 등과 상호 정보전이, 외부 에디터/자동화툴 연동 |
| 실전 “루만 방식” 최적화 | 깊이 얕은 대규모 분기형 트리(루트/1차노트), 빠른 순차/계층화/관계망/중간삽입 넘버링 등, 실제 연구자/집필자/크리에이터에 최적 |

***

## 2.2. 사용자 페르소나 및 주요 요구

### 1. **대규모 정보 구조화/순서 관리가 필요한 상급 사용자**
- 수백~수천 개 루트/분기, 개방적 트리-그래프 혼합 노트
- 노트간 “선형적 흐름, 분기, 병렬, 유기 연결” 모두 직관적 뷰 요구
- 기존 PKM의 성능/질서화 한계 불만 해소
- 파일호환(Obsidian 등), 다양한 마이그레이션 니즈

### 2. **연구자/작가/전문가/학생**
- 지식·자료 관리의 장기적 보존(데이터락인 X)
- 빠른 키워드/트리/관계/문맥 검색
- 최신 노트-접근 경로-중간 삽입/이동 등 고난도 순서정렬 요구

### 3. **데이터 해커/지식생산 파워유저**
- 자동화, 외부에디터, 버전관리, 스크립트/플러그인 등 확장성
- CLI/API등 연동(미래 오픈 API 확장 고려)

***

## 2.3. 핵심 기능 정의 및 사용 시나리오

###  폴더 마크다운 자동 수집/싱크 엔진[1]
- 앱 실행 시 지정 폴더의 .md 파일 자동 스캔/메타 추출
  - **YAML frontmatter 기준 meta(타이틀, UUID, 관계, 타임스탬프 등) 병합**
- 신규 파일/수정탐지 자동싱크(파일감시 or 주기적 폴링)
- **Merge/충돌 검출**: 파일↔DB 중복/불일치, 유저 선택분기
- 이중 저장/복구(파일 → DB 재생성, DB → 전체 파일 덤프 완비)

###  KuzuDB 내장 인메모리 그래프 구조[2]
- 노트: 유일 UUID/파일명/타이틀/내용/타임스탬프/레벨/별칭 등 저장
- 관계: 자식/부모/형제(:NEXT/CHILD_OF/PARENT_OF), 내부/외부 링크/태그 노드
- **루만식 넘버/순서/관계 키**—삽입·구조변경 시 중간 리밸런싱 없음, 빠른 넘버/구조 쿼리
- 빠른 "n차 노트, 서브트리, 백링크, 그래프/트리 뷰" 쿼리

###  GUI/UX[3]
#### (1) **트리/네트워크/루만 넘버링 뷰**
- 트리/계층/분기 구조 뷰(DFS, 루트·분기, 동적개폐/접기)
- 노트별 displayId(1, 1.1, 1.2.1 ...), 계층 스타일·구조 강조
- 노트 간 관계(Sibling, Parent, Child, BackLink, Tag) 시각화
- **노트 찾기(검색), 표시번호(displayId) 역검색** 포함  
- 백링크, 고급 네트워크 맵(향후 플러그인 구조 고려)

#### (2) **노트 생성/편집/구조변경 UX**
- 새 노트, 중간삽입, 자식/형제 추가, 이동/삭제/병합 지원
- 노트 번호/위치 자동 갱신(무중단, 기존 노트 영향 최소)
- drag&drop, 키보드, 명령팔레트 제공

#### (3) **동기화 컨트롤/오프라인/외부 연동**
- 동기화 상태/파일·DB 싱크 시각화
- 에디터뷰(내장, 외부와의 연동), 외부 파일 편집 감지도 내부 DB 반영
- Git/클라우드(DB/파일 백업, push/pull) future 확장

###  고급 검색/정렬[4]
- 제목, 내용, 태그, 표시번호, 상위/하위 관계 검색
- 루트·지도노트·특정 표시번호 등 직접 점프
- 최근 작업/탐색 기록, 즐겨찾기

----

## 2.4. 데이터 구조/구현정책

- **파일 <-> DB 동기화 2중 보장**
  - 모든 마크다운에 UUID/메타 내장(YAML frontmatter), DB sync시 이중 참조
  - 관계/넘버/트리 등은 DB 직렬화, 필요시 파일에도 backup/export 가능
- **관계·순서 키/넘버(lexorank or path) DB필드로 관리 — 중간 삽입 리밸런스 없음**
- **displayId(표시번호) 및 역검색 부분 캐시(anchor 방식)·최적화**
- **오프라인 우선·잠금/실시간 변화 감시(파일 에디터/외부 편집기 연동)**
- **앵커(인덱스노트, 지도노트, 최근 부착, 화면 요구 구간 등) 중심 부분캐시 전략**

***

## 2.5. 아키텍처/동작 흐름

1. 앱 첫 실행:  
  — 파일 → DB 전체 ingest, “메타-관계-구조화”
2. 실시간 DB 탐색/편집/관계 추가:  
  — DB 중심 뷰·순서 관리, 중간삽입 빠른 처리
3. 노트 저장/종료/주기적 트리거 시:  
  — DB 내용 → 마크다운 파일 갱신(동기화)
4. 외부에서 파일 변경시:  
  — 감지 후 변경분만 DB merge(실시간 sync)
5. 검색/뷰:  
  — 표준/부분 캐시 displayId 및 역검색으로 국소 high-speed 쿼리 

***

## 2.6. 개발/출시 단계별 시장 전략

| 단계 | 세부 구현 및 검증 | 시장적합 근거 |
|---|---|---|
| 1단계 | 폴더 ingest, core DB 구조화, 마크다운-Sync, 관계 쿼리 | “파일=진짜 원본”/노트 고속 검색의 요구: Obsidian/Logseq 파워유저들 |
| 2단계 | 트리/루트/분기/계층 뷰, 표시번호 표시, 구조편집 | 대규모 노트에 루만식 유기구조, 빠른 중간삽입 등 차별성 |
| 3단계 | 동기화/충돌 감지 UX, 고급 검색, 외부편집기·Git 연동 | “실전 파워유저: 외부 편집기·동기화·데이터 소유권” 요구 |
| 4단계 | anchor/부분캐시, 고급관계(백링크, 트랙백, 네트워크뷰), 자동화 확장 | “수천~수만 노트 네트워크화/부분 Highspeed View” 시장 Needs |
| 5단계 | 퍼블리싱/공유, AI 기반 추천/분류/자동분기 | “집필-연구-협업” 등 확장, 차세대 PKM/작업환경 통합 기대 |

***

## 2.7. **시장성 분석 요약(진입장벽/경쟁우위 포함)**

- **Obsidian, Logseq 등 ‘파일=원천’ 앱 성장률↑**  
  → 마크다운/로컬/오프라인 + 초고속 서버식 탐색/관리 구조는 거의 공백
- **핵심 고급 기능: “관계/넘버링/루트 분화, 중간삽입, 부분캐시” 실전 처리**  
  → 대부분의 PKM앱은 대량 루트/고난도 중간구조 순서변경 등에서 성능·일관성 한계
- **장기 데이터 지속성(Deadlock-Free, Lock-in Free) 요구**  
  → 데이터 주권·이식성/외부연동·지속성에 실제로 강한 경쟁력
- **Rust/Tauri 기반 네이티브 속도, 확장성**  
  → 앱 덩치/속도 불만 없는 차세대 노트 플랫폼 수요 충족

***

## 2.8. **단계적 성공 전략 및 시장 테스트 포인트**

- **MVP는 “마크다운↔DB 동기화+관계뷰+넘버링”까지 최소 구현**
- 초기 파워유저(Obidian/Logseq poweruser, 데이터해커, 연구자 등)를 위한 베타 테스트
- “1000+ 루트/분기, 1~2만 노트 이상에서도 빠른 뷰·검색·관계·넘버링” 실제 성능/안정성 검증
- 실사용자 피드백 위주 트리밍–> 나만의 PKM→공유/AI확장으로 확장
  
***

## 2.9. **장기적 발전/확장 로드맵 (피드백 기반)**

- 퍼블리싱(웹뷰, 공유링크 등)·협업·모바일 앱·브라우저 확장  
- AI 자동 정리/클러스터링, 추천, LLM 연동 등 고급 기능  
- 커뮤니티 기반 확장(템플릿/플러그인/마켓 등)



